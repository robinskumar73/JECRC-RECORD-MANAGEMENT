var app=app||{};app.Views=app.Views||{};app.Global=app.Global||{};app.Views.Department=Backbone.View.extend({el:$("#DepartmentCreate"),events:{"click #create-dept":"createDepartment","keypress #Department":"handleKeyPress","click #Dept-Cancel":"cancel_department",},createDepartment:function(){app.Global.DepartmentPresentAlready=false;app.Global.selDeptModel=null;value=$("#Department").val();if(value===""){return null}$($("#DepartmentCreate ").children()).addClass("hide");$("#Dept-Cancel").removeClass("hide");$("#dept-screen").removeClass("hide");$("a.navbar-text navbar-right jecrc-nav-dept").click(function(a){a.preventDefault()});$("#AddSemester").removeClass("hide");$("#infoScreen").removeClass("hide");$(".infoScreenHeader").html(value);if(app.Global.Department.findWhere({name:value})!==undefined){app.Global.selDeptModel=app.Global.Department.findWhere({name:value});app.Global.DepartmentPresentAlready=true;return null}app.Global.Department.create({name:value},{headers:{faculty_id:faculty.id,},error:function(b,a){displayMessage("Error saving department..");revertDeptToInitial()},success:function(a){console.log("Successfully added department to database..");displayMessage("Successfully added department to database..");app.Global.selDeptModel=a}})},render:function(){$("#nav-dept-bar").html("");var a=app.Global.Department.length;for(var b=0;b<a;b++){$("#nav-dept-bar").append('<li><a href="#department/'+app.Global.Department.at(b).get("name")+'"  >'+app.Global.Department.at(b).get("name")+"</a></li>");$("#collapse-nav-bar").append('<li class="jecrc-nav-hide"><a href="#department/'+app.Global.Department.at(b).get("name")+'"  >'+app.Global.Department.at(b).get("name")+"</a></li>")}return this},handleKeyPress:function(b){var a=b.which;if(a==13){this.createDepartment()}},cancel_department:function(c){c.preventDefault();var a=app.Global.Department.length;if(!app.Global.DepartmentPresentAlready&&app.Global.Department.at(a-1)===app.Global.selDeptModel){var b=app.Global.Department.pop();var d=$("#nav-dept-bar").children().length;$($("#nav-dept-bar").children()[d-1]).remove()}revertDeptToInitial();hideBatch();hideSection()},initialize:function(){this.listenTo(app.Global.Department,"add",this.displayNavigationBar);this.listenTo(app.Global.Department,"remove",this.removeNavigationBar)},removeNavigationBar:function(a){if(!app.Global.DepartmentPresentAlready){console.log("repetition not found");a.destroy({error:function(c,b){displayMessage("Error removing department..");app.Global.Department.add(c)},success:function(c,b){console.log("Successfully deleted department..");displayMessage("Successfully deleted department..")},headers:{faculty_id:faculty.id,}})}},displayNavigationBar:function(a){value=a.get("name");$("#nav-dept-bar").append('<li><a href="#department/'+value+'"  >'+value+"</a></li>");$("#collapse-nav-bar").append('<li class="jecrc-nav-hide"><a href="#department/'+value+'"  >'+value+"</a></li>")},});var displayMessage=function(a){$("#dept-info-box").removeClass("hide");$("#dept-info-box").html(a);setTimeout(function(){$("#dept-info-box").addClass("hide")},4000)};var revertDeptToInitial=function(){$("#Department").val("");$($("#DepartmentCreate ").children()).removeClass("hide");$("#Dept-Cancel").addClass("hide");$("#dept-screen").addClass("hide");$("a.navbar-text navbar-right jecrc-nav-dept").bind("click");$("#AddSemester").addClass("hide")};var dept_views=new app.Views.Department();app.Views.Semester=Backbone.View.extend({el:$("#radio-btn"),events:{"change input[name=options]":"addSemester"},addSemester:function(b){var a=$(".radio:checked").val();app.Global.semester_id=a;var c=app.Global.selDeptModel;var d=c.get("name");this.showSection();this.updateInfoBox(d,a)},showSection:function(){$("#AddSection").removeClass("hide")},updateInfoBox:function(b,a){$(".infoScreenHeader").html(""+a+""+b+"")}});var semesterView=new app.Views.Semester;$(document).on("change","#section-btn input[name=options]",function(){var b=app.Global.semester_id;var a=$(this).val();app.Global.section_id=a;var d=app.Global.selDeptModel;var c=d.get("name");showBatch();$(".infoScreenHeader").html(b+c+a)});var showBatch=function(){$("#AddBatches").removeClass("hide")};var hideBatch=function(){$("#AddBatches").addClass("hide");$("#publish-batch").addClass("hide")};var hideSection=function(){$("#AddSection").addClass("hide")};app.Views.Batch=Backbone.View.extend({el:$("#AddBatches"),events:{"click .dept-check ":"onClick"},onClick:function(a){setTimeout(this.count)},count:function(){var a=[];$(".infoScreenSubHeader").html("");$(".dept-check").each(function(c,b){if($(b).hasClass("active")){a.push($(b).data("wat"));showinfoScreenSubHeader();var e=app.Global.selDeptModel;var d=e.get("name");$(".infoScreenSubHeader").append('<span class="h4">'+app.Global.semester_id+d+app.Global.section_id+$(b).data("wat")+"</span>")}});app.Global.Batches=a},});var batch=new app.Views.Batch;var showinfoScreenSubHeader=function(){$(".infoScreenSubHeader").removeClass("hide");$("#publish-batch").removeClass("hide")};$(document).on("click","#publish-batch",function(f){var d=app.Global.Batches;var a=app.Global.semester_id;var c=app.Global.selDeptModel;var b=app.Global.section_id;$(".dept-check").each(function(g,e){if($(e).hasClass("active")){var h=$(e).data("wat");app.Global.Branch.create({department_id:c.get("id"),semester_id:a,section_name:b,batch_id:h},{error:function(j,i){displayMessage("Error saving Branch..");$("#Dept-Cancel").click()},success:function(i){displayMessage("Successfully added branch to database..");hideBatch();hideSection();$("#infoScreen").addClass("hide");$("#AddSemester").addClass("hide");$("#dept-screen").addClass("hide");$("#Dept-Cancel").addClass("hide");$("#Department").removeClass("hide");$("#Department").val("");$("#create-dept").removeClass("hide");$("#DepartmentCreate").removeClass("hide");$("span.twitter-typeahead").removeClass("hide")}})}})});app.Views.periodEntry=Backbone.View.extend({tagName:"div",className:"col-md-12",initialize:function(){app.Global.Router.currentView=this;this.fetchMore(this.collection);this.deptDataObj={};var a=this;$(window).scroll(_.debounce(function(){if($(window).scrollTop()+$(window).height()>$(document).height()-100){console.log("scroll position: near  bottom!");a.fetchMore(a.collection)}},300))},fetchMore:function(a){console.log("Inside fetch more function..");var b=this;app.Global.showLoadingBar();a.fetch({error:function(e,c,d){app.Global.hideLoadingBar();console.log("Error fetching department wise entry from database..")},success:function(j,g,r){var f=b.branchUniqueObject(a);for(var o in f){var l=f[o];var n=l.department_id;var k=l.semester_id;var e=l.section_name;var q=app.Global.Department.findWhere({id:n}).get("name");var d=a.where(l);if(b.deptDataObj[o]){b.$el=b.deptDataObj[o]}else{b.$el.append("<h4 class='report-dept-info'>"+k+" "+q+"</h4>");b.$el.append("<span class='report-dept-info'>"+e+"</span><hr class='report-dept-info' style='margin-top:0px;margin-bottom:0px;'>")}var m=new app.Collection.periodEntry(d);var c=m.pluck("days_entry_id");var p=_.uniq(c,true);p=_.sortBy(p,function(i){return i});p=p.reverse();console.info("Printing the department wise entry arr");console.log(p);b.deptDataObj[o]=b.$el;for(var h=0;h<p.length;h++){b.entry_model_arr=a.where({days_entry_id:p[h]});b.afterFetch(b.entry_model_arr);$("#jecrc-main-screen").append(b.render().el)}}b.collection.data.offset=parseInt(b.collection.data.offset)+parseInt(b.collection.data.limit);app.Global.hideLoadingBar()},data:b.collection.data})},afterFetch:function(a){if(a.length===0){console.log("destroying the period entry view as zero data fetched from the server");this.destroy_view()}this.lab={row0:null,row1:null,row2:null};this.LabPeriodAdd=[];this.periodList=$("<tr/>");this.subjectList=$("<tr/>");this.strengthList=$("<tr/>");this.teacherList=$("<tr/>");this.date=a[0].get("date");this.department_name=app.Global.Department.findWhere({id:a[0].get("department_id")}).get("name");this.section_name=a[0].get("section_name");this.semester_id=a[0].get("semester_id");this.day=getDay(this.date);this.parse_date=convertDate(this.date)},branchUniqueObject:function(a){var b={};a.each(function(d){var c=d.get("semester_id")+" - "+d.get("department_id")+" - "+d.get("section_name");b[c]={semester_id:d.get("semester_id"),department_id:d.get("department_id"),section_name:d.get("section_name")}});return b},render:function(){this.addBody(this.day,this.parse_date);var b=$("<thead />");var a=$("<tbody />");b.append(this.periodList);this.table.append(b);a.append(this.subjectList);a.append(this.strengthList);a.append(this.teacherList);this.addToList(this.entry_model_arr);this.table.append(a);return this},addBody:function(a,b){this.$el.append("<h4 class='log_day'>"+a+"</h4>");this.$el.append("<span class='log_date'>"+b+"</span>");var d=$("<div class='col-md-12 jecrc-stats' />");var c=$("<div class='table-responsive'/>");this.table=$("<table class='table table-striped'/>");d.append(c);c.append(this.table);this.$el.append(d);this.$el.append("<br />")},addToList:function(h){for(var u=0;u<h.length;u++){var b=h[u];if(b.get("lab")==="0"){for(var s=0;s<b.get("period").length;s++){this.periodList.append("<th>"+b.get("period")[s]+"</th>")}var g=b.get("period").length;this.subjectList.append("<td colspan='"+g+"' >"+b.get("subject_name")+"</td>");this.strengthList.append("<td  colspan='"+g+"' >"+b.get("strength")+"</td>");this.teacherList.append("<td class='faculty_name_tuple' data-toggle='tooltip' data-placement='top' title='Faculty :  "+b.get("faculty_name").toUpperCase()+"' colspan='"+g+"' >"+getInitialFacultyName(b.get("faculty_name"))+"</td>")}else{var l=null;var t=[];for(var n=0;n<this.LabPeriodAdd.length;n++){var d=this.LabPeriodAdd[n].lab;var o=this.LabPeriodAdd[n].period;var r=b.get("period");if($(o).not(r).length==0&&$(r).not(o).length==0){l=d;t=this.LabPeriodAdd[n].id;break}}if(l===null){var d={row0:null,row1:null,row2:null};var o=b.get("period");l=d;var f=app.Global.randomNumber(999,999999);var c=app.Global.randomNumber(999,999999);var a=app.Global.randomNumber(999,999999);t=[f,c,a];this.LabPeriodAdd.push({period:o,lab:d,id:t})}if(l.row0===null){for(var s=0;s<b.get("period").length;s++){this.periodList.append("<th>"+b.get("period")[s]+"</th>")}}var k=b.get("subject_name");var m=b.get("section_name");var q=b.get("batch");var v=b.get("strength");var p=getInitialFacultyName(b.get("faculty_name"));var g=b.get("period").length;if(l.row0===null){row="0";this.subjectList.append("<td id='"+t[0]+"'  colspan='"+g+"'  rowspan='"+row+"'  >"+k+" -  "+m+q+" Batch  -"+v+" - "+p+"</td>");this.strengthList.append("<td id='"+t[1]+"'  colspan='"+g+"'  rowspan='1'  > -------  </td>");this.teacherList.append("<td  id='"+t[2]+"'  colspan='"+g+"'  rowspan='2'  > ------- </td>");l.row0=true}else{if(l.row1===null){var e=this.strengthList.find("td#"+t[1]);$(e).html(k+" -  "+m+q+" Batch  -"+v+" - "+p);row="1";l.row1=true}else{row="2";var e=this.teacherList.find("td#"+t[2]);$(e).html(k+" -  "+m+q+" Batch  -"+v+" - "+p);l.row2=true;l.row0=null;l.row1=null;l.row2=null}}}}}});app.Views.FacultyEntry=Backbone.View.extend({el:$("#faculty-entry-record"),initialize:function(){this.dept_name=this.model.get("name");this.Template=_.template($("#faculty-entry-form").html());this.form=this.Template({department:this.dept_name})},render:function(){$(this.el).empty();$(this.el).append(this.form);return this}});app.Views.Branch=Backbone.View.extend({initialize:function(){app.Global.Router.currentView=this;this.childViews=[];if(this.collection.length===0){console.log("returning from branch view initialize");return null}var a=this.collection.at(0).get("department_id");this.dept_name=app.Global.Department.findWhere({id:a}).get("name");this.year=["I YEAR","II YEAR","III YEAR","IV YEAR"];this.branchTemplate=_.template($("#branch-template").html());app.Global.dept=false;this.editButton=false},events:{},removeBranch:function(){},showEditBranchIcons:function(){if(!this.editButton){$(".branch-remove-icons").removeClass("hide");this.editButton=true}else{$(".branch-remove-icons").addClass("hide");this.editButton=false}},render:function(){$(this.el).empty();if(this.collection.length===0){return null}var e={};e.department=this.dept_name;e.years=[];var c=[];var k=0;for(var g=0;g<4;g++){var l={};l.branches=[];var b=this.collection.where({semester_id:String(k+1)});if(b!==undefined&&!$.isEmptyObject(b)){for(var f=0;f<b.length;f++){l.branches.push(b[f])}}b=this.collection.where({semester_id:String(k+1+1)});k=k+1+1;if(b!==undefined&&!$.isEmptyObject(b)){for(f=0;f<b.length;f++){l.branches.push(b[f])}}app.Global.section_added=[];l.branches=this.branchArray(l.branches);l.yearname=this.year[g];c.push(l)}e.years=c;$(this.$el).html(this.branchTemplate(e));var a=new app.Model.Faculty;a.set("department_id",this.collection.at(0).get("department_id"));var h=new app.Views.CreateFaculty({model:a});h.department_id=this.collection.at(0).get("department_id");this.childViews.push(h);$("#right-side-hook").append(h.render().el);var d=new app.Views.ShowFaculty;d.department_id=this.collection.at(0).get("department_id");d.fetchMore();$("#right-side-hook").append(d.el);this.childViews.push(d);return this},branchArray:function(g){var h=[];for(var e=0;e<g.length;e++){var k={};var d=g[e];var b=d.get("id");var f=d.get("semester_id");var c=d.get("section_name");var j=d.get("batch_id");k.id=b;var a=f+" - "+this.dept_name+" - "+c;if(app.Global.section_added.indexOf(a)===-1){app.Global.section_added.push(a);k.name=a;h.push(k)}}return h},displayMessage:function(c,a){var b=_.template($("#display-info").html());this.display=b({message:c,typeInfo:a});var d=this.$el.find("#display-info-box");$(d).html(this.display)}});app.Views.CreateFaculty=Backbone.View.extend({initialize:function(){this.template=_.template($("#Create-Faculty-Template").html());this.listenTo(this.model,"invalid",this.validationFailed)},getValue:function(){var c=$("#faculty-first-name").val();var a=$("#faculty-last-name").val();var e=$("#faculty-user-name").val();var d=$("#faculty-email-address").val();if(!c.length&&!a.length&&!e.length&&!d.length){message="All <strong>values</strong> must be entered.";this.displayMessage(message,app.Global.alertType[3]);return false}var b={first_name:c,last_name:a,username:e,email_address:d};return b},events:{"click  #faculty-create-btn":"saveEntry","click  #faculty-reset-btn":"resetEntry"},render:function(){this.$el.append(this.template());return this},saveEntry:function(b){obj=this.getValue();if(!obj){return false}obj.department_id=this.department_id;var a=this;this.model.save(obj,{success:function(d,c){a.resetEntry();console.log("Succesfully created faculty!");var e="<strong>Faculty created</strong>.								<p> Faculty Name: <strong>"+obj.first_name+" "+obj.last_name+"</strong></p>  								<p> Faculty Pass: <strong>"+c.pass_string+"</strong> </p> 								<p><strong>Note</strong>:Change this password as soon as you login.</p>";a.displayMessage(e,app.Global.alertType[1]);a.model.clear({silent:true})},error:function(d,c){a.resetEntry();console.log("Error created faculty!");if(c.responseText.length<30){var e=c.responseText}else{var e="Error creating faculty!"}a.displayMessage(e,app.Global.alertType[3]);a.model.clear({silent:true})},headers:{faculty_id:faculty.id,},})},resetEntry:function(){var b=$("#faculty-first-name").val("");var a=$("#faculty-last-name").val("");var d=$("#faculty-user-name").val("");var c=$("#faculty-email-address").val("")},validationFailed:function(a){this.displayMessage(a.validationError,app.Global.alertType[3])},displayMessage:function(c,a){var b=_.template($("#display-info").html());this.display=b({message:c,typeInfo:a});var d=this.$el.find("#admin-faculty-info-box");$(d).html(this.display)}});app.Views.ShowFaculty=Backbone.View.extend({initialize:function(){this.childViews=[];this.offset=0;this.limit=10;this.facultyList=new app.Collection.Faculty;this.template=_.template($("#faculty-list-collection").html());this.$el.append(this.template());this.listenTo(this.facultyList,"add",this.addFacultyList);this.listenTo(this.facultyList,"reset",this.resetFaculty);this.listenTo(this.facultyList,"remove",this.deleteFaculty);var a=this;$(window).scroll(_.debounce(function(){if($(window).scrollTop()+$(window).height()>$(document).height()-100){console.log("scroll position: near  bottom!");a.fetchMore()}},300))},addFacultyList:function(b){console.log("Adding models;");var a=new app.Views.FacultyItem({model:b});a.listCollection=this.facultyList;this.childViews.push(a);$("ul.faculty-list").append(a.render().el)},resetFaculty:function(){app.Global.facultyList.each(this.addFacultyList,this)},fetchMore:function(){var a=this;var b=false;if(parseInt(this.offset)){b=true}app.Global.showLoadingBar();this.facultyList.fetch({remove:false,data:{offset:a.offset,limit:a.limit,dept_id:a.department_id},error:function(e,c,d){app.Global.hideLoadingBar();console.log("Error fetching faculty list collection from server.")},success:function(f,c,d){app.Global.hideLoadingBar();if(c.length===0&&!b){a.destroy_view();return false}var e=c.length;a.offset=a.offset+e}})},deleteFaculty:function(){this.offset=parseInt(this.offset)-1}});app.Views.FacultyItem=Backbone.View.extend({initialize:function(){app.Global.facultyList.reset();this.template=_.template($("#faculty-list-item").html());this.listenTo(this.model,"destroy",this.deleteFaculty);this.detachElement=null},tagName:"li",className:"faculty-list-items",events:{"dblclick #faculty-list-item-full-name":"edit","click #faculty-item-edit":"edit","click #faculty-create-btn":"updateModel","click #faculty-item-delete":"deleteModel","click #faculty-reset-btn":"cancelUpdate","click #entry-action-btn":"confirmDelete","close.bs.alert #dept-display-box":"cancelDelete"},edit:function(c){c.preventDefault();var a=this.$el.find("#faculty-list-item-full-name");$(a).addClass("hide");this.detachElement=this.$el.find("p");this.detachElement=$(this.detachElement).detach();var b=this.$el.find("#faculty-edit-list");$(b).removeClass("hide");$(this.$el).css("margin-bottom","80px");$(this.$el).css("margin-top","50px")},cancelUpdate:function(){console.log("Updating the models...");var a=this.$el.find("#faculty-list-item-full-name");$(a).removeClass("hide");if(this.detachElement){this.$el.append(this.detachElement);this.detachElement=null}var b=this.$el.find("#faculty-edit-list");$(b).addClass("hide");$(this.$el).css("margin-bottom","0px");$(this.$el).css("margin-top","0px")},deleteModel:function(){this.detachElement=this.$el.find("p");this.detachElement=$(this.detachElement).detach();var a=this.$el.find("#faculty-list-item-full-name");$(a).addClass("h4");var b=_.template($("#entry-log-alert-body").html());this.displayMessage(b(),app.Global.alertType[0])},cancelDelete:function(){var a=this.$el.find("#faculty-list-item-full-name");$(a).removeClass("hide");$(a).removeClass("h4");if(this.detachElement){this.$el.append(this.detachElement);this.detachElement=null}var b=this.$el.find("#faculty-edit-list");$(b).addClass("hide")},confirmDelete:function(){if(faculty.id===this.model.get("id")){var b="<strong>Error:</strong> You cannot delete your <strong>own account</strong>. ";this.displayMessage(b,app.Global.alertType[0]);return false}var a=this.$el.find("#faculty-list-item-full-name");$(a).removeClass("hide");$(a).removeClass("h4");if(this.detachElement){this.$el.append(this.detachElement);this.detachElement=null}var c=this.$el.find("#faculty-edit-list");$(c).addClass("hide");$(this.$el).css("margin-bottom","0px");$(this.$el).css("margin-top","0px");this.model.destroy({success:function(){console.log("successfully delete faculty from server..")},error:function(){console.log("Error deleting faculty from server..")},headers:{faculty_id:faculty.id,}})},updateModel:function(g){console.log("Updating the models...");var a=this.$el.find("#faculty-list-item-full-name");$(a).removeClass("hide");if(this.detachElement){this.$el.append(this.detachElement);this.detachElement=null}var f=this.$el.find("#faculty-edit-list");$(f).addClass("hide");$(this.$el).css("margin-bottom","0px");$(this.$el).css("margin-top","0px");var d=this.getValue();if(!d){var c="Fields cannot be left <strong>blank</strong>";this.displayMessage(c,app.Global.alertType[3]);return false}this.model.set(d);var b=this;this.model.save(null,{success:function(){console.log("successfully updated faculty info to the server..");var e=b.listCollection.get(b.model.get("id"));b.render()},error:function(){console.log("Error updating faculty info to the server.");var e="<strong>Errror</strong> updating faculty information to the server.<strong>Please try again sometime later</strong>";this.displayMessage(e,app.Global.alertType[3])},headers:{faculty_id:faculty.id,}})},getValue:function(){var f=this.$el.find("#faculty-edit-first-name");var e=$(f).val();var g=this.$el.find("#faculty-edit-last-name");var i=$(g).val();var d=this.$el.find("#faculty-edit-username");var c=$(d).val();var h=this.$el.find("#faculty-edit-email-address");var a=$(h).val();if(!e.length&&!i.length&&!c.length&&!a.length){return false}var b={first_name:e,last_name:i,username:c,email_address:a};return b},render:function(){console.info("Rendering the faculty item model");this.$el.empty();var a=this.model.get("first_name")+" "+this.model.get("last_name");this.model.set("name",a);var b=this.template(this.model.toJSON());this.$el.append(b);return this},deleteFaculty:function(a){app.Global.facultyList.remove(a);this.destroy_view()},displayMessage:function(c,a){var b=_.template($("#display-info").html());this.display=b({message:c,typeInfo:a});var d=this.$el.find("#faculty-list-item-display-info");$(d).html(this.display)}});app.Views.activity=Backbone.View.extend({initialize:function(){app.Global.Router.currentView=this;this.childViews=[];this.listenTo(this.collection,"add",this.addOne);this.listenTo(this.collection,"reset",this.addAll);this.offset=0;this.limit=10;this.daysEntryRecord={};this.fetchMore();var a=this;$(window).scroll(_.debounce(function(){if($(window).scrollTop()+$(window).height()>$(document).height()-100){console.log("scroll position: near  bottom!");a.fetchMore()}},300))},fetchMore:function(){var a=this;app.Global.showLoadingBar();var b=faculty.id;this.collection.fetch({data:{offset:a.offset,limit:a.limit,faculty_id:b},remove:false,error:function(e,c,d){app.Global.hideLoadingBar();console.log("Error fetching collection from admin_log collection.")},success:function(f,c,d){app.Global.hideLoadingBar();console.log("Successfully fetched data of admin_log from server.");var e=c.length;a.offset=a.offset+e}})},addOne:function(e){var a=e.get("date");var g=getDay(a);var b=convertDate(a);if(this.daysEntryRecord[a]===undefined){var i=$('<div class="col-md-12 col-xs-12 "></div>');var c=$('<h4 class="log_day"></h4>');var f=$('<span class="log_date"></span>');var h=$('<ul class="jecrc-stats log"></ul>');i.append(c);$(this.$el).append(i);c.append(g);i.append(f);f.append(b);i.append(h);this.daysEntryRecord[a]=h}var d=new app.Views.activityModel({model:e});this.childViews.push(d);$(this.daysEntryRecord[a]).append(d.render().el)},addAll:function(){console.log("resetting  the log entry view...");this.collection.each(this.addOne,this)},render:function(){$(this.$el).empty();if(this.collection.length){this.addAll()}return this}});app.Views.activityModel=Backbone.View.extend({initialize:function(){this.template=_.template($("#faculty_home_log").html())},tagName:"li",render:function(){this.$el.html(this.template(this.model.toJSON()));return this}});app.Views.settings=Backbone.View.extend({initialize:function(){app.Global.Router.currentView=this;this.template=_.template($("#template-reset-settings").html())},events:{"click #settings-delete-btn":"confirmDelete","click #alert_modal_save_btn":"confirmPassBtn"},render:function(){this.$el.html(this.template());return this},confirmDelete:function(){var b=_.template($("#alert-password-confirm-modal").html());this.$el.append(b());var a=this.$el.find("#myModal");$("#myModal").modal("show")},confirmPassBtn:function(){var b=this.$el.find("#pass-confirm");var e=$(b).val();if(e===""){console.warn("Pass must be entered");return false}var d=CryptoJS.MD5(e);console.log("Confirm Password is "+d.toString());var c=this;$.ajax({url:"/Manage/modules/department.php/settings",type:"DELETE",success:function(f){console.info("Succesfullty reset entry");c.displayMessage("Data entry <strong>successfully deleted.</strong>",app.Global.alertType[1])},error:function(){c.displayMessage("<strong>Error wrong password.</strong> Please type your <strong>password correctly</strong>.",app.Global.alertType[3])},headers:{password:d.toString(),faculty_id:faculty.id}});var a=this.$el.find("#myModal");$("#myModal").modal("hide")},displayMessage:function(c,a){var b=_.template($("#display-info").html());this.display=b({message:c,typeInfo:a});var d=this.$el.find("#settings-delete-info");$(d).html(this.display)}});