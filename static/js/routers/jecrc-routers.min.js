app.Routers=app.Routers||{};app.Routers=Backbone.Router.extend({routes:{"":"showHomePage","department/:name":"showDepartment","report/department/:dept_name":"showDepartmentReport","report/department/:dept_name/:year":"showYearReport","report/department/:dept_name/semester/:semester_name/section/:section_name":"showBranchReport",settings:"showSettings"},showHomePage:function(){$(window).unbind("scroll");this.closePreviousViews();if(this.DepartmentElementObj&&this.DepartmentElementObj.length){$("#right-side-hook").html(this.DepartmentElementObj)}$("#admin-department").removeClass("hide");console.log("Loading the activity logs");var a=new app.Views.activity({collection:app.Global.entryLogCollection});a.render();$("#jecrc-main-screen").html(a.el)},showSettings:function(){$(window).unbind("scroll");this.closePreviousViews();if(!this.DepartmentElementObj){this.DepartmentElementObj=$("#admin-department").detach()}else{if(!this.DepartmentElementObj.length){this.DepartmentElementObj=$("#admin-department").detach()}}var a=new app.Views.settings();$("#jecrc-main-screen").html(a.render().el)},closePreviousViews:function(){console.log("Closing the pervious in memory views...");if(this.currentView){this.currentView.destroy_view()}},showDepartmentReport:function(a){$(window).unbind("scroll");this.closePreviousViews();$("#jecrc-main-screen").empty();$("#admin-department").addClass("hide");if(!this.DepartmentElementObj){this.DepartmentElementObj=$("#admin-department").detach()}else{if(!this.DepartmentElementObj.length){this.DepartmentElementObj=$("#admin-department").detach()}}data={offset:0,limit:5,dept_name:a};PeriodEntryRender(data)},showBranchReport:function(d,b,a){$(window).unbind("scroll");this.closePreviousViews();$("#admin-department").addClass("hide");$("#jecrc-main-screen").empty();if(!this.DepartmentElementObj){this.DepartmentElementObj=$("#admin-department").detach()}else{if(!this.DepartmentElementObj.length){this.DepartmentElementObj=$("#admin-department").detach()}}var c=new app.Collection.periodEntry;data={offset:0,limit:5,dept_name:d,sem:b,sec_name:a};PeriodEntryRender(data)},showYearReport:function(b,a){$(window).unbind("scroll");this.closePreviousViews();$("#jecrc-main-screen").empty();$("#admin-department").addClass("hide");if(!this.DepartmentElementObj){this.DepartmentElementObj=$("#admin-department").detach()}else{if(!this.DepartmentElementObj.length){this.DepartmentElementObj=$("#admin-department").detach()}}data={offset:0,limit:5,dept_name:b,year:a};PeriodEntryRender(data)},showDepartment:function(a){$(window).unbind("scroll");this.closePreviousViews();$("#jecrc-main-screen").empty();$("#admin-department").addClass("hide");if(!this.DepartmentElementObj){this.DepartmentElementObj=$("#admin-department").detach()}else{if(!this.DepartmentElementObj.length){this.DepartmentElementObj=$("#admin-department").detach()}}app.Global.showLoadingBar();app.Global.Branch.fetch({error:function(){app.Global.hideLoadingBar();console.log("Error fetching branch from database..")},success:function(b){console.log("Successfully fetched branch data..");if(app.Global.Department.findWhere({name:a})===undefined){app.Global.Department.fetch({error:function(){console.log("Error fetching department..")},success:function(){console.log("Successfully fecthed department data..");app.Global.render_department(a)}})}else{console.log("Simply calling department..");app.Global.render_department(a)}}})}});var PeriodEntryRender=function(a){app.Global.showLoadingBar();if(app.Global.Department.length===0){app.Global.Department.fetch({error:function(){console.log("Error fetching the department..");app.Global.hideLoadingBar()},success:function(){app.Global.hideLoadingBar();console.info("Successfully fetched  department data");fetchPeriod(a)},})}else{fetchPeriod(a)}};var fetchPeriod=function(b){var c=new app.Collection.periodEntry;c.data=b;$("#jecrc-main-screen").html("");var a=new app.Views.periodEntry({collection:c})};app.Global.render_department=function(b){var c=app.Global.Department.findWhere({name:b}).get("id");if(c===undefined){return null}var d=app.Global.Branch.where({department_id:c});var e=new app.Collection.Branch(d);var a=new app.Views.Branch({collection:e});a.render();$("#jecrc-main-screen").html(a.el);console.log("loading bar is getting hide..");app.Global.hideLoadingBar()};$(document).ready(function(a){app.Global.Router=new app.Routers();Backbone.history.start({root:"/"})});