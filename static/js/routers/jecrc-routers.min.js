app.Routers=app.Routers||{};app.Routers=Backbone.Router.extend({routes:{"":"showHomePage","department/:name":"showDepartment","report/department/:dept_name":"showDepartmentReport","report/department/:dept_name/:year":"showYearReport","report/department/:dept_name/semester/:semester_name/section/:section_name":"showBranchReport",settings:"showSettings"},showHomePage:function(){$(window).unbind("scroll");this.closePreviousViews();if(this.DepartmentElementObj&&this.DepartmentElementObj.length){$("#right-side-hook").html(this.DepartmentElementObj)}if(faculty.admin_type==="admin"){$("#admin-department").removeClass("hide")}console.log("Loading the activity logs");var e=new app.Views.activity({collection:app.Global.entryLogCollection});e.render();$("#jecrc-main-screen").html(e.el)},showSettings:function(){$(window).unbind("scroll");this.closePreviousViews();if(!this.DepartmentElementObj){this.DepartmentElementObj=$("#admin-department").detach()}else{if(!this.DepartmentElementObj.length){this.DepartmentElementObj=$("#admin-department").detach()}}var e=new app.Views.settings;$("#jecrc-main-screen").html(e.render().el)},closePreviousViews:function(){console.log("Closing the pervious in memory views...");if(this.currentView)this.currentView.destroy_view()},showDepartmentReport:function(e){$(window).unbind("scroll");this.closePreviousViews();$("#jecrc-main-screen").empty();$("#admin-department").addClass("hide");if(!this.DepartmentElementObj){this.DepartmentElementObj=$("#admin-department").detach()}else{if(!this.DepartmentElementObj.length){this.DepartmentElementObj=$("#admin-department").detach()}}data={offset:0,limit:5,dept_name:e};PeriodEntryRender(data)},showBranchReport:function(e,t,n){$(window).unbind("scroll");this.closePreviousViews();$("#admin-department").addClass("hide");$("#jecrc-main-screen").empty();if(!this.DepartmentElementObj){this.DepartmentElementObj=$("#admin-department").detach()}else{if(!this.DepartmentElementObj.length){this.DepartmentElementObj=$("#admin-department").detach()}}var r=new app.Collection.periodEntry;data={offset:0,limit:5,dept_name:e,sem:t,sec_name:n};PeriodEntryRender(data)},showYearReport:function(e,t){$(window).unbind("scroll");this.closePreviousViews();$("#jecrc-main-screen").empty();$("#admin-department").addClass("hide");if(!this.DepartmentElementObj){this.DepartmentElementObj=$("#admin-department").detach()}else{if(!this.DepartmentElementObj.length){this.DepartmentElementObj=$("#admin-department").detach()}}data={offset:0,limit:5,dept_name:e,year:t};PeriodEntryRender(data)},showDepartment:function(e){$(window).unbind("scroll");this.closePreviousViews();$("#jecrc-main-screen").empty();$("#admin-department").addClass("hide");if(!this.DepartmentElementObj){this.DepartmentElementObj=$("#admin-department").detach()}else{if(!this.DepartmentElementObj.length){this.DepartmentElementObj=$("#admin-department").detach()}}app.Global.showLoadingBar();app.Global.Branch.fetch({error:function(){app.Global.hideLoadingBar();console.log("Error fetching branch from database..")},success:function(t){console.log("Successfully fetched branch data..");if(app.Global.Department.findWhere({name:e})===undefined){app.Global.Department.fetch({error:function(){console.log("Error fetching department..")},success:function(){console.log("Successfully fecthed department data..");app.Global.render_department(e)}})}else{console.log("Simply calling department..");app.Global.render_department(e)}}})}});var PeriodEntryRender=function(e){app.Global.showLoadingBar();if(app.Global.Department.length===0){app.Global.Department.fetch({error:function(){console.log("Error fetching the department..");app.Global.hideLoadingBar()},success:function(){app.Global.hideLoadingBar();console.info("Successfully fetched  department data");fetchPeriod(e)}})}else{fetchPeriod(e)}};var fetchPeriod=function(e){var t=new app.Collection.periodEntry;t.data=e;$("#jecrc-main-screen").html("");var n=new app.Views.periodEntry({collection:t})};app.Global.render_department=function(e){var t=app.Global.Department.findWhere({name:e}).get("id");if(t===undefined)return null;var n=app.Global.Branch.where({department_id:t});var r=new app.Collection.Branch(n);var i=new app.Views.Branch({collection:r});i.render();$("#jecrc-main-screen").html(i.el);console.log("loading bar is getting hide..");app.Global.hideLoadingBar()};$(document).ready(function(e){app.Global.Router=new app.Routers;Backbone.history.start({root:"/"})})